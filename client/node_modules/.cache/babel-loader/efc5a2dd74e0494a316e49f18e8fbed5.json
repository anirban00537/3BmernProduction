{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import _objectSpread from\"C:/kaj/nodejs/3Bmern/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"C:/kaj/nodejs/3Bmern/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/kaj/nodejs/3Bmern/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/kaj/nodejs/3Bmern/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useHistory}from\"react-router-dom\";import{signin,signup}from\"../Api\";var Login=function Login(){var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),auth=_useState2[0],setAuth=_useState2[1];var history=useHistory();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var tdata,_tdata$data,token,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return signin(auth);case 3:tdata=_context.sent;_tdata$data=tdata.data,token=_tdata$data.token,user=_tdata$data.user;localStorage.setItem(\"jwtauth\",token);localStorage.setItem(\"users\",JSON.stringify(user));history.push(\"/admin\");case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"container container_login\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"form-signin\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h3 mb-3 font-weight-normal\",children:\"Please sign in\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputEmail\",className:\"sr-only\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"inputEmail\",className:\"form-control\",placeholder:\"Email address\",required:true,autofocus:true,value:auth.email,onChange:function onChange(e){setAuth(_objectSpread(_objectSpread({},auth),{},{email:e.target.value}));}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputPassword\",className:\"sr-only\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"inputPassword\",className:\"form-control\",placeholder:\"Password\",required:true,value:auth.password,onChange:function onChange(e){setAuth(_objectSpread(_objectSpread({},auth),{},{password:e.target.value}));}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-lg btn-primary btn-block\",type:\"submit\",children:\"Sign in\"})]})});};export default Login;","map":{"version":3,"sources":["C:/kaj/nodejs/3Bmern/client/src/admin/Login.js"],"names":["React","useState","useEffect","useHistory","signin","signup","Login","email","password","auth","setAuth","history","handleSubmit","e","preventDefault","tdata","data","token","user","localStorage","setItem","JSON","stringify","push","target","value"],"mappings":"4pBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,MAAT,CAAiBC,MAAjB,KAA+B,QAA/B,CAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,eACML,QAAQ,CAAC,CAC/BM,KAAK,CAAE,EADwB,CAE/BC,QAAQ,CAAE,EAFqB,CAAD,CADd,wCACXC,IADW,eACLC,OADK,eAKlB,GAAMC,CAAAA,OAAO,CAAGR,UAAU,EAA1B,CACA,GAAMS,CAAAA,YAAY,0FAAG,iBAAOC,CAAP,mJACnBA,CAAC,CAACC,cAAF,GADmB,sBAECV,CAAAA,MAAM,CAACK,IAAD,CAFP,QAEbM,KAFa,2BAGKA,KAAK,CAACC,IAHX,CAGXC,KAHW,aAGXA,KAHW,CAGJC,IAHI,aAGJA,IAHI,CAInBC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAgCH,KAAhC,EACAE,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BC,IAAI,CAACC,SAAL,CAAeJ,IAAf,CAA9B,EACAP,OAAO,CAACY,IAAR,CAAa,QAAb,EANmB,sDAAH,kBAAZX,CAAAA,YAAY,4CAAlB,CAQA,mBACE,YAAK,SAAS,CAAC,2BAAf,uBACE,cAAM,SAAS,CAAC,aAAhB,CAA8B,QAAQ,CAAEA,YAAxC,wBACE,WAAI,SAAS,CAAC,4BAAd,4BADF,cAEE,cAAO,OAAO,CAAC,YAAf,CAA4B,SAAS,CAAC,SAAtC,2BAFF,cAKE,cACE,IAAI,CAAC,OADP,CAEE,EAAE,CAAC,YAFL,CAGE,SAAS,CAAC,cAHZ,CAIE,WAAW,CAAC,eAJd,CAKE,QAAQ,KALV,CAME,SAAS,KANX,CAOE,KAAK,CAAEH,IAAI,CAACF,KAPd,CAQE,QAAQ,CAAE,kBAACM,CAAD,CAAO,CACfH,OAAO,gCAAMD,IAAN,MAAYF,KAAK,CAAEM,CAAC,CAACW,MAAF,CAASC,KAA5B,GAAP,CACD,CAVH,EALF,cAiBE,cAAO,OAAO,CAAC,eAAf,CAA+B,SAAS,CAAC,SAAzC,sBAjBF,cAoBE,cACE,IAAI,CAAC,UADP,CAEE,EAAE,CAAC,eAFL,CAGE,SAAS,CAAC,cAHZ,CAIE,WAAW,CAAC,UAJd,CAKE,QAAQ,KALV,CAME,KAAK,CAAEhB,IAAI,CAACD,QANd,CAOE,QAAQ,CAAE,kBAACK,CAAD,CAAO,CACfH,OAAO,gCAAMD,IAAN,MAAYD,QAAQ,CAAEK,CAAC,CAACW,MAAF,CAASC,KAA/B,GAAP,CACD,CATH,EApBF,cA+BE,eAAQ,SAAS,CAAC,kCAAlB,CAAqD,IAAI,CAAC,QAA1D,qBA/BF,GADF,EADF,CAuCD,CArDD,CAuDA,cAAenB,CAAAA,KAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { signin, signup } from \"../Api\";\r\n\r\nconst Login = () => {\r\n  const [auth, setAuth] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  const history = useHistory();\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const tdata = await signin(auth);\r\n    const { token, user } = tdata.data;\r\n    localStorage.setItem(\"jwtauth\", token);\r\n    localStorage.setItem(\"users\", JSON.stringify(user));\r\n    history.push(\"/admin\");\r\n  };\r\n  return (\r\n    <div className=\"container container_login\">\r\n      <form className=\"form-signin\" onSubmit={handleSubmit}>\r\n        <h1 className=\"h3 mb-3 font-weight-normal\">Please sign in</h1>\r\n        <label htmlFor=\"inputEmail\" className=\"sr-only\">\r\n          Email address\r\n        </label>\r\n        <input\r\n          type=\"email\"\r\n          id=\"inputEmail\"\r\n          className=\"form-control\"\r\n          placeholder=\"Email address\"\r\n          required\r\n          autofocus\r\n          value={auth.email}\r\n          onChange={(e) => {\r\n            setAuth({ ...auth, email: e.target.value });\r\n          }}\r\n        />\r\n        <label htmlFor=\"inputPassword\" className=\"sr-only\">\r\n          Password\r\n        </label>\r\n        <input\r\n          type=\"password\"\r\n          id=\"inputPassword\"\r\n          className=\"form-control\"\r\n          placeholder=\"Password\"\r\n          required\r\n          value={auth.password}\r\n          onChange={(e) => {\r\n            setAuth({ ...auth, password: e.target.value });\r\n          }}\r\n        />\r\n        <button className=\"btn btn-lg btn-primary btn-block\" type=\"submit\">\r\n          Sign in\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}